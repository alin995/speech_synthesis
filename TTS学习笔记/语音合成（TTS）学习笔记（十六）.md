# è¯­éŸ³åˆæˆå­¦ä¹ ï¼ˆåäº”ï¼‰å­¦ä¹ ç¬”è®°

---

# å¦‚ä½•åˆ©ç”¨sadtalkerç”Ÿæˆai alin

## ğŸ”¥ Highlight

- ğŸ”¥ The extension of the [stable-diffusion-webui] 

- ğŸ”¥ `SADTalker` 

|      |                             åˆæˆ                             |                input image                 |
| :--: | :----------------------------------------------------------: | :----------------------------------------: |
|      | <video  src="https://github.com/alin995/speech_synthesis/assets/74090594/a6be9680-2eec-4855-843e-300288e5695e" type="video/mp4"> </video> | <img src='/img/Wwl.png' width='380'> |



#### **ç®€ä»‹ï¼š åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨å¦‚ä½•åˆ©ç”¨è™šæ„çš„å·¥å…·"SADTalker"å’Œ"Stable Diffusion WebUI"æ¥ç”Ÿæˆä¸€ä¸ªåä¸º"Alin"çš„AIè§†é¢‘ã€‚å°†é€šè¿‡ä¸€ç³»åˆ—æ­¥éª¤ï¼Œä»ç”Ÿæˆè¯­éŸ³å†…å®¹åˆ°åœ¨Webç•Œé¢ä¸Šå±•ç¤ºè§†é¢‘ï¼Œå±•ç¤ºè¿™ä¸ªè¿‡ç¨‹ã€‚**

>**æ­¥éª¤ï¼š**
>ä»‹ç»SADTalkerå’ŒStable Diffusion WebUIï¼šæˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬è§†ä¸ºä¸€ç§è¯­éŸ³åˆæˆå·¥å…·å’Œä¸€ä¸ªWebç•Œé¢ï¼Œç”¨äºå°†å£°éŸ³å’Œå›¾åƒç»“åˆæˆä¸€ä¸ªå®Œæ•´çš„è§†é¢‘ã€‚
>
>**å‡†å¤‡æ–‡æœ¬è„šæœ¬ï¼š** é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡ä¸€ä¸ªæ–‡æœ¬è„šæœ¬ï¼Œå…¶ä¸­åŒ…å«"Alin"è§’è‰²æ‰€éœ€è¯´çš„å†…å®¹ã€‚è¿™å¯èƒ½åŒ…æ‹¬é—®å€™ã€è‡ªæˆ‘ä»‹ç»æˆ–å…¶ä»–é€‚åˆçš„å†…å®¹ã€‚
>
>**ç”Ÿæˆè¯­éŸ³å†…å®¹ï¼š** ä½¿ç”¨SADTalkeræ’ä»¶å·¥å…·ï¼Œå°†æ–‡æœ¬è„šæœ¬è½¬æ¢æˆ"Alin"è§’è‰²çš„è¯­éŸ³å†…å®¹ã€‚è¿™ä¸ªå·¥å…·å¯èƒ½æœ‰ä¸€ä¸ªç”¨æˆ·å‹å¥½çš„ç•Œé¢ï¼Œè®©ä½ é€‰æ‹©è¯­éŸ³é£æ ¼ã€è¯­é€Ÿç­‰å‚æ•°ã€‚
>
>**å‡†å¤‡è§†é¢‘ç´ æï¼š** é€‰æ‹©ä¸€ä¸ªé€‚åˆçš„è§†é¢‘èƒŒæ™¯æˆ–åœºæ™¯ï¼Œä¸"Alin"è§’è‰²çš„è¯­éŸ³å†…å®¹ç›¸åŒ¹é…ã€‚è¿™å¯ä»¥æ˜¯ä¸€ä¸ªåŠ¨ç”»ã€å®æ™¯èƒŒæ™¯æˆ–å…¶ä»–è§†è§‰å…ƒç´ ã€‚
>
>**åˆæˆè§†é¢‘ï¼š** å°†ç”Ÿæˆçš„è¯­éŸ³å†…å®¹ä¸é€‰å®šçš„è§†é¢‘ç´ æè¿›è¡Œåˆæˆã€‚ä½¿ç”¨"Stable Diffusion WebUI"å¯ä»¥å¸®åŠ©ä½ åœ¨ä¸€ä¸ªäº’åŠ¨çš„Webç•Œé¢ä¸­å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚ä½ å¯ä»¥å°†è¯­éŸ³å’Œè§†é¢‘ç»„åˆæˆä¸€ä¸ªå®Œæ•´çš„æ¼”ç¤ºè§†é¢‘ã€‚
>
>**äº’åŠ¨Webç•Œé¢ï¼š** ä½¿ç”¨"Stable Diffusion WebUI"ï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ªWebç•Œé¢ä¸Šå±•ç¤ºç”Ÿæˆçš„è§†é¢‘ã€‚è¿™ä¸ªç•Œé¢å¯èƒ½å…è®¸ç”¨æˆ·ä¸è§†é¢‘è¿›è¡Œäº’åŠ¨ï¼Œå¦‚æ’­æ”¾ã€æš‚åœã€è°ƒæ•´éŸ³é‡ç­‰ã€‚
>
>**å¯¼å‡ºå’Œåˆ†äº«ï¼š** åœ¨åˆæˆå’Œå±•ç¤ºå®Œæˆåï¼Œä½ å¯ä»¥å¯¼å‡ºæœ€ç»ˆçš„è§†é¢‘æ–‡ä»¶ï¼Œä»¥åŠä¸€ä¸ªå¯ä»¥åœ¨Webæµè§ˆå™¨ä¸­è®¿é—®çš„é“¾æ¥ï¼Œè®©å…¶ä»–äººæ¬£èµä½ åˆ›ä½œçš„AIè§†é¢‘ã€‚

ç»“è®ºï¼š
å°½ç®¡"SADTalker"å’Œ"Stable Diffusion WebUI"æ˜¯è™šæ„çš„å·¥å…·ï¼Œä½†é€šè¿‡ç±»ä¼¼çš„æµç¨‹ï¼Œä½ å¯ä»¥ä½¿ç”¨å®é™…çš„è¯­éŸ³åˆæˆå·¥å…·å’ŒWebç•Œé¢æ¥å®ç°ç›¸ä¼¼çš„ç›®æ ‡ã€‚ä»ç”Ÿæˆè¯­éŸ³å†…å®¹åˆ°åˆæˆè§†é¢‘ï¼Œå†åˆ°åœ¨äº’åŠ¨çš„Webç•Œé¢ä¸Šå±•ç¤ºï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸ºæˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•å°†å£°éŸ³å’Œå›¾åƒç»“åˆï¼Œåˆ›é€ å‡ºå¼•äººå…¥èƒœçš„AIè§†é¢‘ä½œå“ã€‚è¿™ç§åˆ›æ–°çš„æ–¹æ³•å¯ä»¥è®©æˆ‘ä»¬åœ¨æŠ€æœ¯çš„ä¸–ç•Œä¸­ä½“éªŒåˆ°æ— é™çš„å¯èƒ½æ€§ã€‚



å…·ä½“çš„æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š

---

SadTalkerçš„å®‰è£…åŠä½¿ç”¨æ–¹æ³•ï¼š
SadTalkerä¸»é¡µï¼šhttps://github.com/Winfredy/SadTalker 

ä¸€ SadTalkerçš„å®‰è£…

### Linux:

1. Installing [anaconda](https://www.anaconda.com/), python and git.
2. Creating the env and install the requirements.

```python
>git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui.git
>æ‰§è¡Œwebui.sh
git clone https://github.com/Winfredy/SadTalker.git

cd SadTalker 

conda create -n sadtalker python=3.8

conda activate sadtalker

pip install torch==1.12.1+cu113 torchvision==0.13.1+cu113 torchaudio==0.12.1 --extra-index-url https://download.pytorch.org/whl/cu113

conda install ffmpeg

pip install -r requirements.txt

### tts is optional for gradio demo. 
### pip install TTS
```

åœ¨webui ä¸‹è½½SadTalker

<img aligin="center" src="/img/searchhttp.png" />



äºŒã€ä¸­æ–‡æ’ä»¶
1.å®‰è£…æ’ä»¶
stable diffusioné¡¹ç›®çš„æ±‰åŒ–æ’ä»¶å°±åœ¨Extensionsæ‰©å±•é‡Œã€‚æˆ‘ä»¬é€‰æ‹©Extensions => availabel => æŠŠhide Extensions with tagsä¸‹é¢çš„å‡ ä¸ªåŠŸèƒ½æŒ‰é”®å–æ¶ˆ => search ç›´æ¥æœç´¢zh_CN localization æ‰¾åˆ°zh_CN localizationæ’ä»¶ï¼Œç›´æ¥ç‚¹å‡»å³è¾¹çš„installå®‰è£…å³å¯ ![image-20230818143855230](/Users/wangwenlin/Desktop/img/loadchinese.png)

ç‚¹å‡» extensions >> installed,æŸ¥çœ‹æˆ‘ä»¬æ˜¯å¦æˆåŠŸçš„å®‰è£…äº†æ’ä»¶ï¼Œé€‰æ‹©æˆ‘ä»¬åˆšåˆšä¸‹è½½çš„çš„stable-diffusion-webui-localization-zh_CNæ±‰åŒ–æ’ä»¶ï¼Œç‚¹å‡»apply and restart UI,è¿™é‡Œæˆ‘ä»¬å°±æˆåŠŸå®‰è£…äº†æ±‰åŒ–æ’ä»¶ã€‚

<img aligin="center" src="/img/anzhuang.png" />

2.è®¾ç½®æ’ä»¶
æˆ‘ä»¬éœ€è¦é€‰æ‹©setting>>user interface>>localizationï¼Œé€‰æ‹©zh_CN

ç‚¹å‡»apply settingså³å¯ï¼Œè¿™é‡Œç”±äºæ±‰åŒ–è®¾ç½®éœ€è¦é‡å¯UIç•Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç‚¹å‡»reload UIç•Œé¢

<img aligin="center" src="/img/setting.png" />

é‡å¯åï¼Œæ±‰åŒ–å®Œæˆäº†ï¼ï¼ï¼























åœ¨è¿›è¡Œé«˜æ¸…è¯­éŸ³åˆæˆæ¢ç´¢ä¹‹å‰ï¼Œç»¼åˆæ€§èƒ½ã€æ•ˆæœå’Œç¨³å®šæ€§ï¼Œåœ¨8kå’Œ16kçš„åœºæ™¯ä¸‹ï¼Œé‡‡ç”¨ LPCNet ä½œä¸ºç¥ç»ç½‘ç»œå£°ç å™¨ã€‚åœ¨å½“æ—¶ï¼Œè€ƒè™‘ç›´æ¥åœ¨ LPCNet ä¸Šåˆæˆ48kçš„å£°éŸ³ï¼Œä½†æ˜¯é€šè¿‡è®ºæ–‡è°ƒç ”å’Œä¸€äº›åˆæ­¥çš„å®éªŒå‘ç°ï¼ŒLPCNet å­˜åœ¨æ¯”è¾ƒå¤§çš„å±€é™æ€§ï¼š

1. åŸºäºçº¿æ€§é¢„æµ‹ç³»æ•°ï¼ˆLinear Prediction Coefficient, LPCï¼‰å‡è®¾ï¼Œæ¨å¹¿èƒ½åŠ›ä¸è¶³ï¼›

2. åŸºäºé€ç‚¹çš„äº¤å‰ç†µï¼ˆCross Entropy, CEï¼‰æŸå¤±å‡½æ•°ï¼Œåœ¨éè¯­éŸ³éƒ¨åˆ†ä¸åˆç†ï¼›

3. åŸºäºè‡ªå›å½’çš„å£°ç å™¨ï¼Œæ€§èƒ½å·®ã€‚

æ‰€ä»¥ï¼Œå‚è€ƒå­¦æœ¯ç•Œçš„ç ”ç©¶è¿›å±•é‡‡ç”¨äº†ä¸€ç§åŸºäº GAN çš„æ¡†æ¶ï¼Œå®ƒä¸»è¦æœ‰ä¸‰ä¸ªç‰¹ç‚¹ï¼š

1. åˆ©ç”¨åˆ¤åˆ«å™¨ï¼ˆDï¼‰æ¥æŒ‡å¯¼å£°ç å™¨ (å³ç”Ÿæˆå™¨G) çš„è®­ç»ƒï¼›2. åŸºäº MSD å’Œ MPD å»ºæ¨¡è¯­éŸ³ä¸­ä¿¡å·çš„å¹³ç¨³ç‰¹æ€§å’Œå‘¨æœŸç‰¹æ€§ï¼Œç›¸æ¯”äº CE lossï¼Œèƒ½å¤Ÿè¾¾åˆ°å¯¹å£°éŸ³æ›´å¥½çš„è¿˜åŸæ•ˆæœï¼›

2. **æœ¬æ–‡ä¸»è¦ä»‹ç»äº†æ‘©é™¢ç¬¬äº”ä»£è¯­éŸ³åˆæˆæŠ€æœ¯â€”â€”åŸºäºéŸµå¾‹å»ºæ¨¡çš„ SAM-BERTã€æƒ…æ„Ÿè¯­éŸ³åˆæˆ Emotion TTS å’Œé«˜æ¸…è¯­éŸ³åˆæˆ HiFi-TTS çš„ Expressive-TTSã€‚

---

## ç›¸å…³èµ„æº

> [SadTalker gitåœ°å€](https://github.com/Winfredy/SadTalker) 
>
> [SadTalkerå®˜ç½‘](https://github.com/OpenTalker/SadTalker/blob/main/docs/webui_extension.md)

